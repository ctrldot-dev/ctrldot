---
description: Run Docker, kernel, and Web Dot for this project so the agent can start the full stack
alwaysApply: true
---

# Running Services (futurematic-kernel)

## After code changes

**Always build and restart** after adding or changing code so changes are applied:

- **Go (kernel, CLI, seed/bootstrap):** rebuild and restart the kernel: `go build -o bin/kernel ./cmd/kernel && ...` then run the binary, or `go run ./cmd/kernel` in background.
- **Web Dot (Node/TS):** from `web-dot`: `npm run build && npm run server` (restart the server). If port 3000 is already in use, stop the existing process first (e.g. `kill $(lsof -ti :3000)` or `lsof -ti :3000 | xargs kill`) then start the server so the new code runs.
- After editing both Go and web-dot in one session, rebuild and restart both.

This project uses:
- **Postgres** via Docker Compose (port 5432)
- **Kernel** Go server (port 8080), requires DB_URL and Postgres
- **Web Dot** Node server (port 3000), requires kernel on 8080

When asked to start the app, run services, or get the web UI working:

1. Start Postgres: `docker-compose up -d` (from repo root). Ensure Colima/Docker is running first (`colima start` if needed).
2. Start the kernel: `DB_URL="postgres://kernel:kernel@localhost:5432/kernel?sslmode=disable" PORT=8080 go run ./cmd/kernel` (background).
3. Build and start Web Dot: `cd web-dot && npm run build && npm run server` (or use `./start-web-ui.sh` from repo root).

Terminal commands that need Docker (e.g. `docker-compose`, `docker ps`) must run in an environment where the Docker socket is available. If Cursor's sandbox blocks the Docker socket, the user should have `chat.sandboxEnabled` set to `false` in Cursor settings so the agent can run these commands.
